<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Open WhatsApp App</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
    }
    .container {
      max-width: 400px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input, textarea, button {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    #countryName {
      font-size: 14px;
      color: #666;
      margin-top: 5px;
    }
    button {
      background-color: #25D366;
      color: white;
      border: none;
      margin-top: 20px;
      cursor: pointer;
    }
    button:hover {
      background-color: #1ebc59;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Open WhatsApp Chat</h2>

    <label>Country Code</label>
    <input type="text" id="countryCode" placeholder="e.g. +91 or 1" onblur="showCountryName()" />
    <div id="countryName"></div>

    <label>Mobile Number</label>
    <input type="text" id="mobileNumber" placeholder="Enter mobile number" />

    <label>Custom Message</label>
    <textarea id="message" placeholder="Type your message...">Hi...</textarea>

    <button onclick="startChat()">Open in WhatsApp</button>
  </div>

  <script>
    // âœ… Full international country codes list
    const countryMap = {
      "1": "United States / Canada",
      "7": "Russia",
      "20": "Egypt",
      "27": "South Africa",
      "30": "Greece",
      "31": "Netherlands",
      "32": "Belgium",
      "33": "France",
      "34": "Spain",
      "36": "Hungary",
      "39": "Italy",
      "40": "Romania",
      "41": "Switzerland",
      "43": "Austria",
      "44": "United Kingdom",
      "45": "Denmark",
      "46": "Sweden",
      "47": "Norway",
      "48": "Poland",
      "49": "Germany",
      "51": "Peru",
      "52": "Mexico",
      "53": "Cuba",
      "54": "Argentina",
      "55": "Brazil",
      "56": "Chile",
      "57": "Colombia",
      "58": "Venezuela",
      "60": "Malaysia",
      "61": "Australia",
      "62": "Indonesia",
      "63": "Philippines",
      "64": "New Zealand",
      "65": "Singapore",
      "66": "Thailand",
      "81": "Japan",
      "82": "South Korea",
      "84": "Vietnam",
      "86": "China",
      "90": "Turkey",
      "91": "India",
      "92": "Pakistan",
      "93": "Afghanistan",
      "94": "Sri Lanka",
      "95": "Myanmar",
      "98": "Iran",
      "211": "South Sudan",
      "212": "Morocco",
      "213": "Algeria",
      "216": "Tunisia",
      "218": "Libya",
      "220": "Gambia",
      "221": "Senegal",
      "222": "Mauritania",
      "223": "Mali",
      "224": "Guinea",
      "225": "Ivory Coast",
      "226": "Burkina Faso",
      "227": "Niger",
      "228": "Togo",
      "229": "Benin",
      "230": "Mauritius",
      "231": "Liberia",
      "232": "Sierra Leone",
      "233": "Ghana",
      "234": "Nigeria",
      "235": "Chad",
      "236": "Central African Republic",
      "237": "Cameroon",
      "238": "Cape Verde",
      "239": "Sao Tome & Principe",
      "240": "Equatorial Guinea",
      "241": "Gabon",
      "242": "Congo",
      "243": "DR Congo",
      "244": "Angola",
      "245": "Guinea-Bissau",
      "246": "British Indian Ocean Territory",
      "248": "Seychelles",
      "249": "Sudan",
      "250": "Rwanda",
      "251": "Ethiopia",
      "252": "Somalia",
      "253": "Djibouti",
      "254": "Kenya",
      "255": "Tanzania",
      "256": "Uganda",
      "257": "Burundi",
      "258": "Mozambique",
      "260": "Zambia",
      "261": "Madagascar",
      "262": "RÃ©union",
      "263": "Zimbabwe",
      "264": "Namibia",
      "265": "Malawi",
      "266": "Lesotho",
      "267": "Botswana",
      "268": "Eswatini",
      "269": "Comoros",
      "971": "United Arab Emirates",
      "972": "Israel",
      "973": "Bahrain",
      "974": "Qatar",
      "975": "Bhutan",
      "976": "Mongolia",
      "977": "Nepal",
      "992": "Tajikistan",
      "993": "Turkmenistan",
      "994": "Azerbaijan",
      "995": "Georgia",
      "996": "Kyrgyzstan",
      "998": "Uzbekistan"
    };

    function showCountryName() {
      const input = document.getElementById('countryCode').value.trim().replace(/\D/g, '');
      const display = document.getElementById('countryName');
      if (input.length > 0) {
        display.textContent = countryMap[input]
          ? `ðŸŒ Country: ${countryMap[input]}`
          : `â“ Country not found for code: ${input}`;
      } else {
        display.textContent = '';
      }
    }

    function startChat() {
      let countryCode = document.getElementById('countryCode').value.trim().replace(/\D/g, '');
      const mobileNumber = document.getElementById('mobileNumber').value.trim().replace(/\D/g, '');
      const message = document.getElementById('message').value.trim();

      if (!countryCode || !mobileNumber.match(/^\d{6,15}$/)) {
        alert("Please enter a valid country code and mobile number.");
        return;
      }

      const fullNumber = `${countryCode}${mobileNumber}`;
      const url = `whatsapp://send?phone=${fullNumber}&text=${encodeURIComponent(message)}`;
      window.location.href = url;
    }

    // ðŸŒ Auto-detect country on load (optional)
    window.onload = function () {
      fetch("https://ipapi.co/json/")
        .then(response => response.json())
        .then(data => {
          const detectedCode = data.country_calling_code?.replace("+", "");
          if (detectedCode) {
            document.getElementById('countryCode').value = detectedCode;
            showCountryName();
          }
        })
        .catch(error => console.log("Location lookup failed", error));
    };
  </script>
</body>
</html>
